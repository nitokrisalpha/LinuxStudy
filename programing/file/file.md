# linux 文件结构

    linux中一切皆文件，他为操作系统服务和设备提供了简单而统一的接口

## 文件和设备

    linux 中设备通常也被映射为文件，linux中比较重要的设备文件有三个:
        /dev/console    : 控制台文件
        /dev/tty        : 终端文件
        /dev/null       : 空文件，所有写向这个设备的文件都会被丢弃

## 系统调用

    使用少量函数就可以对文件和设备进行访问和控制。这些函数被成为系统调用，由系统提，操作系统的核心部分称为内核，是一组驱动程序，是一组对硬件进行控制的底层接口，为了向用户提供一个一致的接口，设备驱动程序封装了所有与硬件相关的特性。硬件特有的功能通常可用过ioctl系统调用来提供
    下面是用于访问设备驱动程序的系统调用
        open    : 打开文件或者设备
        read    : 从打开的文件或设备里读取数据
        write   : 向文件或设备写数据
        close   : 关闭文件或设备
        ioctl   : 把控制信息传递给设备驱动程序

## 库函数

    由于系统调用的性能很低，为了给设备和磁盘文件提供一个更高层的接口，linux发行版提供了一系列标准库函数

## 底层文件访问

    每个运行中的程序被称为进程，他有一些与之关联的文件描述符，系统中一般会有以下三个文件描述符
        0   : 标准输入
        1   : 标准输出
        2   : 标准错误

### write系统调用

    wirte系统调用的功能是向系统缓冲区写入前nbytes数据，其返回值是写入的字节数，如果返回0则表示没有写入任何数据，如果是-1则表示写入数据失败，错误代码保存在全局变量errno里(示例代码见write.c)

### read系统调用

    read系统调用是从文件描述符fildes相关联的文件里读入nbytes个字节数据，并把他们放到数据区buf中。返回实际读入的字节数，如果返回0，就表示未读入任何数据，已达到了文件尾。同样，如果返回的是-1，就表示read调用出现了错误(示例代码见read.c)